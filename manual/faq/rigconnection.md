---
title: リグとの接続に関するFAQ
---

# 目次

FAQ-2 リグコントロールに関すること

* [FAQ-2-1 リグコントロールとCWキーイングを1本のUSBケーブルで行う](#faq-2-1-リグコントロールとcwキーイングを1本のusbケーブルで行う)
* [FAQ-2-2 SO2Rのための制御はどのようにしたら良いか](#faq-2-2-so2r%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AE%E5%88%B6%E5%BE%A1%E3%81%AF%E3%81%A9%E3%81%AE%E3%82%88%E3%81%86%E3%81%AB%E3%81%97%E3%81%9F%E3%82%89%E8%89%AF%E3%81%84%E3%81%8B)

FAQ-3 CWキーイングに関すること
  
* [FAQ-3-1 CWが突然全く打てなくなってしまう](#faq-3-1-cwが突然全く打てなくなってしまう)
* [FAQ-3-2 Ctrl-Z でCQの繰り返しをしたら、間隔なく送出を繰り返してしまう](#faq-3-2-ctrl-z-%E3%81%A7cq%E3%81%AE%E7%B9%B0%E3%82%8A%E8%BF%94%E3%81%97%E3%82%92%E3%81%97%E3%81%9F%E3%82%89%E9%96%93%E9%9A%94%E3%81%AA%E3%81%8F%E9%80%81%E5%87%BA%E3%82%92%E7%B9%B0%E3%82%8A%E8%BF%94%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86)
* [FAQ-3-3 相手のコールサインを入力途中でTABキーを押したあと、追記や修正ができないことがある](#faq-3-3-%E7%9B%B8%E6%89%8B%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%AB%E3%82%B5%E3%82%A4%E3%83%B3%E3%82%92%E5%85%A5%E5%8A%9B%E9%80%94%E4%B8%AD%E3%81%A7tab%E3%82%AD%E3%83%BC%E3%82%92%E6%8A%BC%E3%81%97%E3%81%9F%E3%81%82%E3%81%A8%E8%BF%BD%E8%A8%98%E3%82%84%E4%BF%AE%E6%AD%A3%E3%81%8C%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8%E3%81%8C%E3%81%82%E3%82%8B)
* [FAQ-3-4 PC-CWキーイングアダプタ DCPA04 の使い方がわかりません](#faq-3-4-pc-cw%E3%82%AD%E3%83%BC%E3%82%A4%E3%83%B3%E3%82%B0%E3%82%A2%E3%83%80%E3%83%97%E3%82%BF-dcpa04-%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9%E3%81%8C%E3%82%8F%E3%81%8B%E3%82%8A%E3%81%BE%E3%81%9B%E3%82%93)

  
## FAQ-2-1 リグコントロールとCWキーイングを1本のUSBケーブルで行う

### 質問

USBポートをもつリグで、リグコントロールとCWキーイングをUSBケーブル1本でやりたいです。どうすればいいですか？

### 答え

リグによって、できるものとできないものとがあります。まず、[マニュアルのリグコントロールのページ](https://use.zlog.org/manual/%E3%83%AA%E3%82%B0%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%AB)を読み、自分のリグがどのような機能に対応しているかを確認してください。リグのUSBポートが持つ機能により、以下の4つの可能性が考えられます。

(1) 仮想COMポートを2つ持つリグの場合(IC-9700, IC-705, FT-991A, FT-891, TS-890 など)  
リグコントロール用のCOMポートと、CWキーイング用のCOMポートを別に持つリグの場合は、リグコントロールの設定(ハードウエア)でそれぞれのポートを"Control port"と"CW port"に設定すればOKです。(例として、[IC-9700での設定方法](https://use.zlog.org/manual/ic9700.html)がマニュアルにあります。)

(2) 仮想COMポートを1つしか持たないがCWキーイングに対応するリグの場合(IC-7300 など)  
1つのCOMポートをリグコントロールとCWキーイングで共用できるタイプのリグでは、"Control port"と"CW port"におなじCOMポートを設定し、運用ができます。(例として、[IC-7300での設定方法](https://use.zlog.org/manual/ic7300.html)がマニュアルにあります。)

(3) 仮想COMポートを2つ持っているが、CWキーイングに対応していないリグの場合(IC-9100, IC-7100 など)  
リグコントロールはできますが、CWキーイングには対応していないため、CWキーイング用のインターフェースを別途用意する必要があります。
インターフェースの作例としては、nksg氏による[USBIF4CW](https://nksg.net/gadget/) や、USB-シリアル変換ケーブルを介してシリアルポートでキーイングするものなどがあります。[マニュアルのCWキーイングのページ](https://use.zlog.org/manual/CW%E3%82%AD%E3%83%BC%E3%82%A4%E3%83%B3%E3%82%B0)も参考にしてください。

(4) 仮想COMポートを1つしか持たず、CWキーイングに対応していないリグの場合(TS-590,TS-2000 など)  
(3)の場合と同じです。CWキーイング用のインターフェースを別途用意する必要があります。ただし、CATコマンドを使ってCW符号を再生する機能が使える場合があります。その場合は別途インターフェースを用意しなくてもCWの送出が可能です。

## FAQ-2-2 SO2Rのための制御はどのようにしたら良いか

### 質問

最近流行のSO2Rをやってみたいと思い、切り替え器を製作しようとしていますが、しくみが複雑でよくわかりません。切り替えの制御はどのようにしたら良いでしょうか。

### 答え

SO2Rと一口に言っても、その運用スタイルや制御内容はオペレータごとに異なります。ご自身がどのような運用スタイルを求めているか、まず考えてみましょう。ここではもっとも簡単に始める方法として、まず2台のリグの受信音（ヘッドホン）の切替制御をすることを考えます。  


zLog令和では、SO2R向け制御信号出力機能(COMポートを利用)が用意されています。[v2.8(v2.9における互換モードを含む)](https://use.zlog.org/manual/%E3%82%B7%E3%83%B3%E3%82%B0%E3%83%AB%E3%82%AA%E3%83%9A2Radio(SO2R)%E3%81%A7%E3%81%AE%E5%88%A9%E7%94%A8)では、TX出力にCOMポートを設定し、RTS信号を使って RigA/RigB どちらを主たる送信機としているか、切り替え器に与えます。(RigA: RTS OFF, RigB: RTS ON となります。)「送信中」と「受信のみ」のときのそれぞれで動作を切り替えたければ、別途PTT信号を与える必要があるかもしれません。Auto RIG switch機能使用時など送受のリグの組み合わせによりさらに複雑な制御をしたい場合は、RX出力に別のCOMポートを設定し制御信号を用いることもできます。  


[v2.9](https://use.zlog.org/manual/%E3%82%B7%E3%83%B3%E3%82%B0%E3%83%AB%E3%82%AA%E3%83%9A2Radio(SO2R)%E3%81%A7%E3%81%AE%E5%88%A9%E7%94%A8V2.9)では、v2.8とは全く異なる信号が出力される仕様となっており、互いに互換性はありません。v2.9の場合は、TX出力にCOMポートを設定し、DTR信号を使ってRigA/RigB の選択を切り替え器に与えると良いでしょう。(RigA: DTR OFF, RigB: DTR ON となります。) RX出力には、RigA/RigB それぞれグループ内の2つのリグのうちどちらを選択中かがわかる信号が出ています。(DTR OFF/ON:RigA 1/2, RTS OFF/ON:RigB 3/4 にそれぞれ対応。) しかし、v2.8とは異なり、選択されている受信リグの情報は出力されません。　


切り替え器の製作については、検索エンジンなどで作例を検索し、自分に合った回路を工夫して作成してください。


## FAQ-3-1 CWが突然全く打てなくなってしまう

### 質問

コンテスト中、ＣＷキーイングが突然できなくなりました。  
仕方ないのでzLogを再起動すると回復しましたが、何か起こりましたか？  

### 答え

考えられる原因のひとつはUSBへのRF回り込みです。  

以下説明長いです。  
1. 最近のUSB直結でPC接続できるリグに対応するため、
   リグコントロール用のシリアル通信と、キーイング用のシリアル通信を
   共用するようにしました。（そうしないと実現できない）
2. 屋外でのノートＰＣ使用時に給油等で発電機を止める際などの停電時にリグは電源OFF，
   ノートＰＣはバッテリー駆動となるが、通信はできないため結局zLogを再起動することに
   なるため、リグコントロールのウインドウにON/OFFのスイッチを設けてシリアル通信を
   ON/OFFできるようにしました。
3. そのついでに、zLogはUSBケーブルの抜去を検出すると、リグコントロールをOFFにするようにしています。
   これはリグ直結，シリアル変換ケーブル，その他I/F機器はUSB接続なので、抜けたと言うことは
   何らかのトラブルが発生したと推測できるからです。
4. 上記1と2よりリグコントロールをOFFにするとCWキーイングができなくなります。
5. ここで本題ですが、USBにRFの回り込みが発生してUSBコントローラがリセットされるような状況（詳細はわかりません）になると、
   上記3が発動してリグコントロールをOFFにしてしまいます。
   そうすると突然CWキーイングができなくなります。（同時にリグコントロールも止まっているはずです）
  
突然CWキーイングができなくなったら、リグコントロールウインドウ左上のスイッチがOFFになっていないか確認して下さい。  
OFFならONにするとキーイングできるようになります。  
ONなら別の原因と思われます。  
  
参考：[モバイル対応](https://use.zlog.org/manual/%E3%83%AA%E3%82%B0%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%AB#%E3%83%A2%E3%83%90%E3%82%A4%E3%83%AB%E5%AF%BE%E5%BF%9C2850)


## FAQ-3-2 Ctrl-Z でCQの繰り返しをしたら、間隔なく送出を繰り返してしまう

### 質問

USBケーブル(COMポート)を経由してリグと接続し、ＣＷキーイングの設定をしました。Ctrl-Z を押してCQを一定間隔で繰り返すつもりが、間隔が無く、延々と繰り返してしまいます。何が問題なのでしょうか？  

### 答え

いわゆるCATコマンドを経由したCWキーイングを行っている場合に起こりうる現象です。  

zLog令和では、COMポート経由のCWのキーイングには2通りの方法が使用されます。1つはzLog側からCOMポートにより直接キーイングを行う方法で、もう1つはCATコマンドによりリグ側のキーイング機能を使う方法です。　　
前者ではCWの文字の送出をzLog側で制御できるため、送出間隔の設定（「各種設定］－「運用設定」－「CW/RTTY」タブの「CQ繰り返し間隔(秒)」)はメッセージの最後と次のメッセージの間隔になります。しかし後者では、メッセージをCATコマンドにのせて送出するため、送出間隔の設定はメッセージの頭と次のメッセージの頭の間隔になります。従って、送出間隔の設定がメッセージ送出に掛かる時間より短いと、間隔がなく詰まった時間で送出されてしまいます。　　

CATコマンドによるキーイングでは、送出間隔の設定時間を、本来の間隔とメッセージ送出に掛かる時間を足した値としてください。   

例： 「CQ TEST DE ...... TEST」(メッセージ 4秒) <----間隔 3秒 ----> 「CQ TEST DE ...... TEST」(メッセージ 4秒) としたい場合は "7秒" と設定する。   

ただしこの設定は全リグに共通の設定となりますので、異なるキーイング方式を適用した複数のリグを接続している場合、それぞれの間隔が一致しなくなります。フィーリングを一致させたい場合は、キーイング接続している全てのリグで同一のキーイング方式を採用してください。

## FAQ-3-3 相手のコールサインを入力途中でTABキーを押したあと、追記や修正ができないことがある

### 質問

相手局に早くコールバックするため、コールサイン欄に入力を途中までした状態でTABキーを押し、さらに続きを入力したり一部修正をしたりするテクニックを多用しているが、なぜか一部のリグでそれができないことがあります。何が問題なのでしょうか？  

### 答え

FAQ-3-2 と同様で、いわゆるCATコマンドを経由したCWキーイングを行っている場合に起こりうる現象です。CATコマンドによるキーイングでは、コマンドにメッセージ文字列をいっぺんにのせてしまうため、TABキーを押した時点で送出文字列が確定してしまいます。そのため、あとから未送出の文字を修正したり、追加したりすることはできなくなります。  
もしこのようなテクニックを多用するのであれば、COMポートやUSBIF4CWなど、zLog側から直接(1文字ずつ)キーイングする方式を使用してください。  

## FAQ-3-4 PC-CWキーイングアダプタ DCPA04 の使い方がわかりません

### 質問

JH4VAJ氏作のPC-CWキーイングアダプタ DCPA04 を使ってPCからキーイングをしようとしていますが、うまくキーイングができません。どうしたらうまくいくでしょうか。  

### 答え

まず、JH4VAJ氏のサイトに書かれている、DCPA04のzLog令和での[使い方](https://www.jh4vaj.com/dcpa04)をよくお読みください。特に、DCPA04 のキーイング出力端子(3.5mm ステレオミニジャック)のセンター(C)端子には RTS 信号が出力されていることに注意してください。一般的な3.5mmステレオプラグコードでリグのKEY端子と結線した場合、キーイングはセンター端子、すなわち RTS信号で行うことになります。zLog令和のハードウエア設定では、DCPA04 に設定された仮想COM番号を「キーイング」に設定することに加え、その「設定」として RTS を KEY に割り当てる必要があります。  
また、DCPA04 のパドル入力端子については、PCキーイングモードでは単なるストレートキー端子として機能します。パドルを用いたエレキー動作をPCキーイングと併用したい場合は、"エレキーヤー"が別途必要ですのでご注意ください。
